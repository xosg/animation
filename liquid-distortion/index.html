<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Liquid Distortion</title>
  <style>
    html, body { height: 100%; width: 100%; margin: 0; padding: 0; background: #181c20; }
    body { width: 100vw; height: 100vh; margin: 0; padding: 0; overflow: hidden; }
    canvas { background: #181c20; display: block; width: 100vw; height: 100vh; }
  </style>
</head>
<body>
  <canvas id="c"></canvas>
  <script>
    // Liquid distortion effect
    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');
    let w, h;
    function resize() {
      w = window.innerWidth;
      h = window.innerHeight;
      canvas.width = w;
      canvas.height = h;
    }
    window.addEventListener('resize', resize);
    resize();

    // Simplex noise for displacement
    const grad3 = [[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];
    const p = [];
    for (let i=0; i<256; i++) p[i]=Math.floor(Math.random()*256);
    const perm = [];
    for(let i=0; i<512; i++) perm[i]=p[i & 255];
    function dot(g, x, y) { return g[0]*x+g[1]*y; }
    function noise(xin, yin) {
      let F2 = 0.5*(Math.sqrt(3)-1);
      let s = (xin+yin)*F2;
      let i = Math.floor(xin+s);
      let j = Math.floor(yin+s);
      let G2 = (3-Math.sqrt(3))/6;
      let t = (i+j)*G2;
      let X0 = i-t, Y0 = j-t;
      let x0 = xin-X0, y0 = yin-Y0;
      let i1, j1;
      if(x0>y0){i1=1;j1=0;}else{i1=0;j1=1;}
      let x1 = x0-i1+G2, y1 = y0-j1+G2;
      let x2 = x0-1+2*G2, y2 = y0-1+2*G2;
      let ii = i&255, jj = j&255;
      let gi0 = perm[ii+perm[jj]]%12;
      let gi1 = perm[ii+i1+perm[jj+j1]]%12;
      let gi2 = perm[ii+1+perm[jj+1]]%12;
      let n0, n1, n2;
      n0 = n1 = n2 = 0;
      let t0 = 0.5-x0*x0-y0*y0;
      if(t0>=0){t0 *= t0; n0 = t0 * t0 * dot(grad3[gi0], x0, y0);}
      let t1 = 0.5-x1*x1-y1*y1;
      if(t1>=0){t1 *= t1; n1 = t1 * t1 * dot(grad3[gi1], x1, y1);}
      let t2 = 0.5-x2*x2-y2*y2;
      if(t2>=0){t2 *= t2; n2 = t2 * t2 * dot(grad3[gi2], x2, y2);}
      return 70*(n0+n1+n2);
    }

    // Color palette
    function getColor(val) {
      // Blend between blue, purple, and cyan
      if (val < -0.2) return '#1e2a4c';
      if (val < 0.1) return '#4ec3fa';
      if (val < 0.3) return '#b7e3c2';
      if (val < 0.5) return '#eaf7ff';
      return '#a7bfff';
    }

    let t = 0;
    function draw() {
      let scale = 0.012;
      let disp = 18;
      let img = ctx.createImageData(w, h);
      for (let y = 0; y < h; y++) {
        for (let x = 0; x < w; x++) {
          let nx = x * scale, ny = y * scale;
          let n = noise(nx, ny + t*0.18);
          // Displacement
          let dx = Math.floor(x + Math.sin(n * Math.PI) * disp);
          let dy = Math.floor(y + Math.cos(n * Math.PI) * disp);
          if (dx < 0 || dx >= w || dy < 0 || dy >= h) continue;
          let val = noise(nx + 100, ny + 100 + t*0.13);
          let c = getColor(val);
          let idx = (dy * w + dx) * 4;
          img.data[idx+0] = parseInt(c.slice(1,3),16);
          img.data[idx+1] = parseInt(c.slice(3,5),16);
          img.data[idx+2] = parseInt(c.slice(5,7),16);
          img.data[idx+3] = 255;
        }
      }
      ctx.putImageData(img, 0, 0);
      t += 0.012;
      requestAnimationFrame(draw);
    }
    draw();
  </script>
</body>
</html>
