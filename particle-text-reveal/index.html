<html></html>
<head>
    <title>Particle Text Reveal Effect</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #181a24;
            width: 100vw;
            height: 100vh;
        }
        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>
<canvas id="particleText"></canvas>
<script>
const canvas = document.getElementById('particleText');
const ctx = canvas.getContext('2d');
let w = window.innerWidth;
let h = window.innerHeight;
canvas.width = w;
canvas.height = h;


// List of texts to cycle through
const texts = ['HELLO', 'WORLD', 'PARTICLE', 'REVEAL', 'ANIMATION', 'EFFECT'];
let textIndex = 0;
let displayText = texts[textIndex];

function getTextData(text) {
    const fontSize = Math.min(w, h) * 0.18;
    ctx.font = `bold ${fontSize}px Arial Black, Arial, sans-serif`;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    let tempCanvas = document.createElement('canvas');
    tempCanvas.width = w;
    tempCanvas.height = h;
    let tctx = tempCanvas.getContext('2d');
    tctx.font = ctx.font;
    tctx.textAlign = ctx.textAlign;
    tctx.textBaseline = ctx.textBaseline;
    tctx.fillStyle = '#fff';
    tctx.clearRect(0, 0, w, h);
    tctx.fillText(text, w/2, h/2);
    return tctx.getImageData(0, 0, w, h).data;
}

let imageData = getTextData(displayText);

// Create particles at text pixels
let particles = [];
function createParticlesFromText(imageData) {
    let arr = [];
    for (let y = 0; y < h; y += 7) {
        for (let x = 0; x < w; x += 7) {
            let idx = (y * w + x) * 4;
            if (imageData[idx+3] > 128) {
                arr.push({x, y});
            }
        }
    }
    return arr;
}

let textPoints = createParticlesFromText(imageData);
// Initialize particles at random positions, assign targets from textPoints
for (let i = 0; i < textPoints.length; i++) {
    let pt = textPoints[i];
    particles.push({
        x: Math.random() * w,
        y: Math.random() * h,
        tx: pt.x,
        ty: pt.y,
        vx: 0,
        vy: 0,
        color: `hsl(${180 + Math.random()*120}, 80%, 70%)`,
        alpha: 0
    });
}


function animate() {
    ctx.clearRect(0, 0, w, h);
    for (let p of particles) {
        // Move toward target
        let dx = p.tx - p.x;
        let dy = p.ty - p.y;
        p.vx += dx * 0.02;
        p.vy += dy * 0.02;
        p.vx *= 0.78;
        p.vy *= 0.78;
        p.x += p.vx;
        p.y += p.vy;
        // Fade in
        if (p.alpha < 1) p.alpha += 0.02;
        ctx.save();
        ctx.globalAlpha = p.alpha;
        ctx.beginPath();
        ctx.arc(p.x, p.y, 3.2, 0, Math.PI*2);
        ctx.fillStyle = p.color;
        ctx.shadowColor = p.color;
        ctx.shadowBlur = 8;
        ctx.fill();
        ctx.restore();
    }
    requestAnimationFrame(animate);
}

// Periodically change text
setInterval(() => {
    textIndex = (textIndex + 1) % texts.length;
    displayText = texts[textIndex];
    imageData = getTextData(displayText);
    let newPoints = createParticlesFromText(imageData);
    // Reassign targets for each particle
    // If more particles needed, add new ones; if fewer, fade out extras
    if (newPoints.length > particles.length) {
        // Add new particles at random positions
        for (let i = particles.length; i < newPoints.length; i++) {
            let pt = newPoints[i];
            particles.push({
                x: Math.random() * w,
                y: Math.random() * h,
                tx: pt.x,
                ty: pt.y,
                vx: 0,
                vy: 0,
                color: `hsl(${180 + Math.random()*120}, 80%, 70%)`,
                alpha: 0
            });
        }
    }
    for (let i = 0; i < particles.length; i++) {
        if (i < newPoints.length) {
            particles[i].tx = newPoints[i].x;
            particles[i].ty = newPoints[i].y;
            // Optionally fade in if previously faded out
            if (particles[i].alpha < 0.1) particles[i].alpha = 0;
        } else {
            // Fade out extra particles
            particles[i].alpha -= 0.05;
            if (particles[i].alpha < 0) particles[i].alpha = 0;
            // Move offscreen
            particles[i].tx = Math.random() * w;
            particles[i].ty = h + 100;
        }
    }
    // Remove fully faded out particles
    particles = particles.filter(p => p.alpha > 0 || p.tx < w);
}, 2500);


window.addEventListener('resize', () => {
    w = window.innerWidth;
    h = window.innerHeight;
    canvas.width = w;
    canvas.height = h;
    imageData = getTextData(displayText);
    let newPoints = createParticlesFromText(imageData);
    // Adjust number of particles
    if (newPoints.length > particles.length) {
        for (let i = particles.length; i < newPoints.length; i++) {
            let pt = newPoints[i];
            particles.push({
                x: Math.random() * w,
                y: Math.random() * h,
                tx: pt.x,
                ty: pt.y,
                vx: 0,
                vy: 0,
                color: `hsl(${180 + Math.random()*120}, 80%, 70%)`,
                alpha: 0
            });
        }
    }
    for (let i = 0; i < particles.length; i++) {
        if (i < newPoints.length) {
            particles[i].tx = newPoints[i].x;
            particles[i].ty = newPoints[i].y;
        } else {
            particles[i].tx = Math.random() * w;
            particles[i].ty = h + 100;
        }
    }
    particles = particles.slice(0, newPoints.length);
});

animate();
</script>
</body>
</html>
