<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flow Field Particles</title>
  <style>
    html, body { height: 100%; width: 100%; margin: 0; padding: 0; background: #181c20; }
    body { width: 100vw; height: 100vh; margin: 0; padding: 0; overflow: hidden; }
    canvas { background: #181c20; display: block; width: 100vw; height: 100vh; }
  </style>
</head>
<body>
  <canvas id="c"></canvas>
  <script>
    // Flow field particles animation
    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');
    let w, h;
    function resize() {
      w = window.innerWidth;
      h = window.innerHeight;
      canvas.width = w;
      canvas.height = h;
    }
    window.addEventListener('resize', resize);
    resize();

    // Simplex noise for flow field
    const grad3 = [[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];
    const p = [];
    for (let i=0; i<256; i++) p[i]=Math.floor(Math.random()*256);
    const perm = [];
    for(let i=0; i<512; i++) perm[i]=p[i & 255];
    function dot(g, x, y) { return g[0]*x+g[1]*y; }
    function noise(xin, yin) {
      let F2 = 0.5*(Math.sqrt(3)-1);
      let s = (xin+yin)*F2;
      let i = Math.floor(xin+s);
      let j = Math.floor(yin+s);
      let G2 = (3-Math.sqrt(3))/6;
      let t = (i+j)*G2;
      let X0 = i-t, Y0 = j-t;
      let x0 = xin-X0, y0 = yin-Y0;
      let i1, j1;
      if(x0>y0){i1=1;j1=0;}else{i1=0;j1=1;}
      let x1 = x0-i1+G2, y1 = y0-j1+G2;
      let x2 = x0-1+2*G2, y2 = y0-1+2*G2;
      let ii = i&255, jj = j&255;
      let gi0 = perm[ii+perm[jj]]%12;
      let gi1 = perm[ii+i1+perm[jj+j1]]%12;
      let gi2 = perm[ii+1+perm[jj+1]]%12;
      let n0, n1, n2;
      n0 = n1 = n2 = 0;
      let t0 = 0.5-x0*x0-y0*y0;
      if(t0>=0){t0 *= t0; n0 = t0 * t0 * dot(grad3[gi0], x0, y0);}
      let t1 = 0.5-x1*x1-y1*y1;
      if(t1>=0){t1 *= t1; n1 = t1 * t1 * dot(grad3[gi1], x1, y1);}
      let t2 = 0.5-x2*x2-y2*y2;
      if(t2>=0){t2 *= t2; n2 = t2 * t2 * dot(grad3[gi2], x2, y2);}
      return 70*(n0+n1+n2);
    }

    // Particle system
    const NUM_PARTICLES = 1800;
    const particles = [];
    for (let i = 0; i < NUM_PARTICLES; i++) {
      particles.push({
        x: Math.random() * w,
        y: Math.random() * h,
        angle: 0,
        speed: 0.7 + Math.random() * 0.7,
        hue: Math.floor(180 + 120 * Math.sin(i/NUM_PARTICLES * Math.PI)),
        alpha: 0.18 + 0.22 * Math.random()
      });
    }

    let t = 0;
    function draw() {
      ctx.globalAlpha = 0.18;
      ctx.fillStyle = '#181c20';
      ctx.fillRect(0, 0, w, h);
      ctx.globalAlpha = 1.0;
      for (const p of particles) {
        // Flow field direction
        let nx = p.x * 0.0025, ny = p.y * 0.0025;
        let angle = noise(nx, ny + t*0.12) * Math.PI * 2 * 0.18 + noise(nx+100, ny+100 + t*0.09) * Math.PI * 2 * 0.18;
        p.angle = angle;
        // Move
        p.x += Math.cos(angle) * p.speed;
        p.y += Math.sin(angle) * p.speed;
        // Wrap
        if (p.x < 0) p.x += w;
        if (p.x > w) p.x -= w;
        if (p.y < 0) p.y += h;
        if (p.y > h) p.y -= h;
        // Draw
        ctx.save();
        ctx.globalAlpha = p.alpha;
        ctx.strokeStyle = `hsl(${p.hue}, 90%, 65%)`;
        ctx.beginPath();
        ctx.moveTo(p.x, p.y);
        ctx.lineTo(p.x - Math.cos(angle) * 8, p.y - Math.sin(angle) * 8);
        ctx.stroke();
        ctx.restore();
      }
      t += 0.008;
      requestAnimationFrame(draw);
    }
    draw();
  </script>
</body>
</html>
